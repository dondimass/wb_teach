events {
    worker_connections  1024;
}

http {

#Last_upstream_add_here

    upstream test {
        server api_main_test:8080 weight=1;
    }

    upstream u_whsync_maindc1_PublisherFromRequestWeb {
        server whsync.dc.wildberries.ru:11000 weight=1;
    }

    upstream sorting_external_wavebreaker_api {
        server api_outwh_SortingExternalWavebreakerApi:8080 weight=1;
    }

    upstream ItemConsistFromContentToWarehouse {
        server api_outwh_ItemConsistFromContentToWarehouse:8080 weight=1;
    }

    upstream assembly_pack_from_container {
        server api_main_AssemblyPackFromContainer:8080 weight=1;
    }

    upstream DischargeActs {
        server api_main_DischargeActs:8080 weight=1;
    }

    upstream PrepareForEu {
        server api_main_PrepareForEu:8080 weight=1;
    }

    upstream StaleWriteOff {
        server api_main_StaleWriteOff:8080 weight=1;
    }
    
    upstream ShipmentInfoApi {
        server api_main_ShipmentInfoApi:8080 weight=1;
    }    
    
    upstream ChrtRepositoryApi {
        server api_main_ChrtRepositoryApi:8080 weight=1;
    }    

    upstream DictProductsApi {
        server api_main_DictProductsApi:8080 weight=1;
    }

    upstream WmsApiSpecClothesApi {
        server api_main_WmsApiSpecClothesApi:8080 weight=1;
    }        

    upstream PublisherFromHandheldWeb {
        server sc-sync.dpl.wb.ru:10000 weight=1;
        server sc-sync-02.dl.wb.ru:10000 weight=3;
    } 

    upstream WmsApiReservationTransferBoxApi {
        server api_main_WmsApiReservationTransferBoxApi:8080 weight=1;
    }

    upstream TransferboxesFromMarketPlaceToWarehouse {
        server api_outwh_TransferboxesFromMarketPlaceToWarehouse:8080 weight=1;
    }    

    upstream ShipmentOfRecyclables {
        server api_main_ShipmentOfRecyclables:8080 weight=1;
    } 

    upstream PublisherFromOrrRequestWeb {
        server wh-external-sync.dl.wb.ru:10000 weight=1;
    } 

    upstream PublisherFromMarketplaceRequestWeb {
        server  wh-external-sync.dl.wb.ru:10001 weight=1;
    } 

    upstream AcceptnceGoodsAcceptance {
        server  api_main_AcceptnceGoodsAcceptance:8080 weight=1;
    }  

    upstream ShkPreparedForBlrApi {
        server  api_main_ShkPreparedForBlrApi:8080 weight=1;
    }          

    upstream shk_repo {
        server shkrepo-1.dl.wb.ru:80 weight=1;
        server shkrepo-2.dpl.wb.ru:80 weight=1;
    }

    upstream ShkRepositoryApi {
        server api_main_ShkRepositoryApi:8080 weight=1;
    }      

    upstream AssemblyEmployeeApi {
        server api_main_AssemblyEmployeeApi:8080 weight=1;
    }            
              
    server {

#Last_location_add_here                                        

        location /srv/wh/test {
          proxy_pass         http://test/;
          proxy_redirect     off;
          proxy_buffering    off; 
        }   
    
        location /srv/wh/whsync/maindc1/request_web/ {
            proxy_pass         http://u_whsync_maindc1_PublisherFromRequestWeb/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/sorting_external_wavebreaker_api/ {
            proxy_pass         http://sorting_external_wavebreaker_api/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/outwh_import/item_consist_from_content_to_warehouse/ {
            proxy_pass         http://ItemConsistFromContentToWarehouse/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/assembly_pack_from_container/ {
            proxy_pass         http://assembly_pack_from_container/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/discharge_acts/ {
            proxy_pass         http://DischargeActs/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/prepare_for_eu/ {
            proxy_pass         http://PrepareForEu/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/stale_write_off/ {
            proxy_pass         http://StaleWriteOff/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/dictionary/chrt_repository_api/ {
            proxy_pass         http://ChrtRepositoryApi/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/wms/dictionary/products_api/ {
            proxy_pass         http://DictProductsApi/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/shipment_api/ {
            proxy_pass         http://ShipmentInfoApi/;
            proxy_redirect     off;
            proxy_buffering    off;
        }    

        location /srv/wh/wms/spec_clothes_api/ {
            proxy_pass         http://WmsApiSpecClothesApi/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/scsync/publisher_from_handheld_web/ {
            proxy_pass         http://PublisherFromHandheldWeb/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/wms_api_reservation_transfer_box_api/ {
            proxy_pass         http://WmsApiReservationTransferBoxApi/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/transfer_boxes_from_market_place_to_warehouse/ {
            proxy_pass         http://TransferboxesFromMarketPlaceToWarehouse/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/shipment_of_recyclables/ {
            proxy_pass         http://ShipmentOfRecyclables/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/whext/publisher_from_orr_request_web/ {
            proxy_pass         http://PublisherFromOrrRequestWeb/;
            proxy_redirect     off;
            proxy_buffering    off;
        }

        location /srv/wh/whext/publisher_from_marketplace_request_web/ {
            proxy_pass         http://PublisherFromMarketplaceRequestWeb/;
            proxy_redirect     off;
            proxy_buffering    off;
        }  
        
        location /srv/wh/acceptance_api/goodsacceptance/ {
            proxy_pass         http://AcceptnceGoodsAcceptance/;
            proxy_redirect     off;
            proxy_buffering    off;
        }  

        location /srv/wh/sorting/shk_prepared_for_blr/ {
            proxy_pass         http://ShkPreparedForBlrApi/;
            proxy_redirect     off;
            proxy_buffering    off;
        }    

        location /srv/shk_repo/ {
            proxy_pass         http://shk_repo/srv/shk_repo/;
            proxy_redirect     off;
            proxy_buffering    off;
        }
        
        location /srv/shk_repo_api/ {
            proxy_pass         http://ShkRepositoryApi/;
            proxy_redirect     off;
            proxy_buffering    off;
        }  

        location /srv/wh/assembly_employee_api/ {
            proxy_pass         http://AssemblyEmployeeApi/;
            proxy_redirect     off;
            proxy_buffering    off;
        }   
    }
}
